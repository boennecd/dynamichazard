
> arg_list <- list(
+   X = design_mat$X,
+   tstart = design_mat$Y[, 1],  tstop = design_mat$Y[, 2], events = design_mat$Y[, 3],
+   a_0 = rep(0, nco .... [TRUNCATED] 

> res <- do.call(ddhazard_fit, arg_list)

> tryCatch({
+   res_new <- do.call(ddhazard_fit_cpp_prelim, arg_list)
+ }, finally = {
+   sink()
+   close(log_file)
+ })

> design_mat <- get_design_matrix(survival::Surv(tstart, tstop, event) ~ x1 + x2 + x3 - 1, sims$res)

> sum(design_mat$Y[, 3] & design_mat$Y[, 2] <= 10)
[1] 245

> rist_sets <- get_risk_obj(design_mat$Y, by = 1, max_T = 10, id = sims$res$id)

> design_mat$Y[, 2] <- rist_sets$stop_new

> design_mat$Y[, 3] <- rist_sets$new_events_flags

> arg_list <- list(
+   X = design_mat$X,
+   tstart = design_mat$Y[, 1],  tstop = design_mat$Y[, 2], events = design_mat$Y[, 3],
+   a_0 = c(1, 1, 1) .... [TRUNCATED] 

> tryCatch({
+   cat("UKF runtime\n")
+   print(system.time(res_UKF <- do.call(ddhazard_fit_cpp_prelim, arg_list)))
+   arg_list$method <- "EKF"
+   c .... [TRUNCATED] 
UKF runtime
Iteration 1 ended with conv criteria 2.04368
   user  system elapsed 
  22.23    1.25   23.48 
EKF runtime
Iteration 1 ended with conv criteria 1.05244
Iteration 6 ended with conv criteria 0.0155253
   user  system elapsed 
   0.06    0.04    0.05 
MSE for UKF
[1] 1.683381
MSE for EKF
[1] 2.012851
